<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="calculator.css">
</head>
<body>
    <div class="calculator" role="application" aria-label="Calculator">
        <div class="display">
            <div class="display-previous" id="previousOperand" role="status" aria-live="polite" aria-atomic="true" aria-label="Previous calculation"></div>
            <div class="display-current" id="currentOperand" role="status" aria-live="polite" aria-atomic="true" aria-label="Current value">0</div>
        </div>
        <div class="buttons">
            <button class="btn-clear" data-action="clear" aria-label="Clear all">AC</button>
            <button class="btn-delete" data-action="delete" aria-label="Delete last digit">DEL</button>
            <button class="btn-operator" data-operator="÷" aria-label="Divide">÷</button>
            
            <button data-number="7" aria-label="Number 7">7</button>
            <button data-number="8" aria-label="Number 8">8</button>
            <button data-number="9" aria-label="Number 9">9</button>
            <button class="btn-operator" data-operator="×" aria-label="Multiply">×</button>
            
            <button data-number="4" aria-label="Number 4">4</button>
            <button data-number="5" aria-label="Number 5">5</button>
            <button data-number="6" aria-label="Number 6">6</button>
            <button class="btn-operator" data-operator="-" aria-label="Subtract">-</button>
            
            <button data-number="1" aria-label="Number 1">1</button>
            <button data-number="2" aria-label="Number 2">2</button>
            <button data-number="3" aria-label="Number 3">3</button>
            <button class="btn-operator" data-operator="+" aria-label="Add">+</button>
            
            <button class="btn-zero" data-number="0" aria-label="Number 0">0</button>
            <button data-number="." aria-label="Decimal point">.</button>
            <button class="btn-equals" data-action="equals" aria-label="Calculate result">=</button>
        </div>
    </div>

    <script>
        const previousOperandDisplay = document.getElementById('previousOperand');
        const currentOperandDisplay = document.getElementById('currentOperand');
        
        // Button click event listeners
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', function() {
                handleButtonClick(this);
            });
        });

        // Keyboard navigation support
        document.addEventListener('keydown', function(event) {
            // Number keys (0-9)
            if (event.key >= '0' && event.key <= '9') {
                event.preventDefault();
                const button = document.querySelector(`button[data-number="${event.key}"]`);
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            // Decimal point
            else if (event.key === '.') {
                event.preventDefault();
                const button = document.querySelector('button[data-number="."]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            // Operators
            else if (event.key === '+') {
                event.preventDefault();
                const button = document.querySelector('button[data-operator="+"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            else if (event.key === '-') {
                event.preventDefault();
                const button = document.querySelector('button[data-operator="-"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            else if (event.key === '*') {
                event.preventDefault();
                const button = document.querySelector('button[data-operator="×"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            else if (event.key === '/') {
                event.preventDefault();
                const button = document.querySelector('button[data-operator="÷"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            // Enter key for equals
            else if (event.key === 'Enter' || event.key === '=') {
                event.preventDefault();
                const button = document.querySelector('button[data-action="equals"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            // Escape key for clear
            else if (event.key === 'Escape') {
                event.preventDefault();
                const button = document.querySelector('button[data-action="clear"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
            // Backspace for delete
            else if (event.key === 'Backspace') {
                event.preventDefault();
                const button = document.querySelector('button[data-action="delete"]');
                if (button) {
                    button.focus();
                    handleButtonClick(button);
                }
            }
        });

        function handleButtonClick(button) {
            // Visual feedback only - logic will be added in next task
            console.log('Button activated:', button.textContent);
            
            // Add visual feedback for keyboard users
            button.style.transform = 'translateY(0)';
            button.style.boxShadow = '0 2px 6px rgba(0, 0, 0, 0.1)';
            setTimeout(() => {
                button.style.transform = '';
                button.style.boxShadow = '';
            }, 100);
        }
    </script>
</body>
</html>
